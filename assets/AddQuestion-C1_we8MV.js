import{A as tt,$ as at,X as st,c as t,C as rt,E as it,F as lt,G as E,d as e,J as o,K as ot,M as v,a0 as Ee,Y as c,O as r,N as s,I as n,V as Qe,T as be,a1 as $e,H as I,Q as R,a2 as O,Z as nt,a3 as vt,a4 as Me}from"./index-CtMulDBz.js";import{g as ct,e as U,i as W,b as he,d as ut,s as Ce,c as dt,f as pt,h as _t,j as ft}from"./databaseService-DpeqZkc3.js";var yt=v('<div class="loading svelte-1qrp95a">Loading...</div>'),mt=v('<div class="survey-item svelte-1qrp95a"><span class="survey-name svelte-1qrp95a"> </span> <div class="survey-actions svelte-1qrp95a"><button class="svelte-1qrp95a">Edit</button> <button class="delete svelte-1qrp95a">Delete</button> <button class="share svelte-1qrp95a">Copy Link</button></div></div>'),qt=v('<div class="existing-surveys svelte-1qrp95a"><h3 class="svelte-1qrp95a">Existing Surveys</h3> <!></div>'),bt=v('<div class="survey-management svelte-1qrp95a"><h2 class="svelte-1qrp95a">Survey Management</h2> <button class="create-new svelte-1qrp95a">Create New Survey</button> <!></div>'),ht=v('<div class="survey-name-form svelte-1qrp95a"><button class="back-button svelte-1qrp95a">← Back to Survey List</button> <div class="survey-section svelte-1qrp95a"><h2 class="svelte-1qrp95a">Enter Survey Name</h2> <input type="text" placeholder="Enter survey name" class="svelte-1qrp95a"> <button class="svelte-1qrp95a">Submit Survey Name</button></div></div>'),gt=v('<input type="text" class="svelte-1qrp95a">'),xt=v('<div class="topics-form svelte-1qrp95a"><button class="back-button svelte-1qrp95a">← Back to Survey List</button> <div class="topics-section svelte-1qrp95a"><h2 class="svelte-1qrp95a">How many topics would you like to add? (2-10)</h2> <input type="number" min="2" max="10" class="svelte-1qrp95a"> <h3 class="svelte-1qrp95a">Enter Your Topics</h3> <!> <button class="svelte-1qrp95a">Submit Topics</button></div></div>'),wt=v('<div class="question-item svelte-1qrp95a"><span class="question-text svelte-1qrp95a"> </span> <div class="question-actions svelte-1qrp95a"><button class="delete svelte-1qrp95a">Delete</button></div></div>'),kt=v('<h3 class="svelte-1qrp95a">Questions</h3> <!>',1),St=v('<p class="no-questions svelte-1qrp95a">No questions added yet.</p>'),At=v('<div class="existing-questions svelte-1qrp95a"><button class="create-new svelte-1qrp95a">Add New Question</button> <!></div>'),Tt=v('<label class="svelte-1qrp95a"><input type="checkbox" class="svelte-1qrp95a"> </label>'),Nt=v('<div class="button-options svelte-1qrp95a"><h4 class="svelte-1qrp95a"></h4> <input type="text" class="svelte-1qrp95a"> <div class="topic-checkboxes svelte-1qrp95a"><p class="svelte-1qrp95a">Select associated topics:</p> <!></div></div>'),Et=v('<div class="add-question-container svelte-1qrp95a"><button class="back-button svelte-1qrp95a">← Back to Questions</button> <h2 class="svelte-1qrp95a"> </h2> <input type="text" placeholder="Enter your question" class="svelte-1qrp95a"> <div class="options-count svelte-1qrp95a"><h3 class="svelte-1qrp95a">Number of options for this question:</h3> <input type="number" min="2" max="10" class="svelte-1qrp95a"></div> <div class="button-container svelte-1qrp95a"></div> <button class="svelte-1qrp95a">Add Question</button></div>'),Qt=v('<div class="question-management svelte-1qrp95a"><button class="back-button svelte-1qrp95a">← Back to Survey List</button> <h2 class="svelte-1qrp95a"> </h2> <div class="survey-link svelte-1qrp95a"><p>Share this link with others:</p> <div class="link-container svelte-1qrp95a"><input type="text" readonly="" class="svelte-1qrp95a"> <button class="svelte-1qrp95a">Copy</button></div></div> <!></div>'),$t=v('<main class="svelte-1qrp95a"><!> <!></main>');function Lt(Le,Be){tt(Be,!1);const ge=at(),ce=()=>Ee(D,"$areTopicsAdded",ge),He=()=>Ee(F,"$isSurveyNameAdded",ge);let y=c(""),b=c(2),u=c([]),Q=c(""),k=c(2),$=c([]),ee=c([]),ue=null,p=c(null),te=c(!1),M=c([]),S=c(!1),i=c(!1),D=$e(!1),F=$e(!1),ae=c(!0);st(async()=>{await de()});const de=async()=>{try{t(i,!0),t(ee,await ct()),t(i,!1)}catch(a){console.error("Error loading surveys:",a),t(i,!1)}},Oe=()=>{t(ae,!1),t(te,!1),F.set(!1),D.set(!1),t(y,""),ue=null,t(p,null),t(b,2),se()},De=async a=>{try{t(i,!0),t(p,a.id),ue=a.name,t(y,a.name),t(te,!0),t(ae,!1),F.set(!0),D.set(!0),t(u,a.topics||[]),t(M,await he(e(p))),t(S,!1),t(i,!1)}catch(l){console.error("Error editing survey:",l),t(i,!1)}},xe=()=>{t(S,!e(S)),e(S)&&(t(Q,""),re())},Fe=async a=>{if(confirm(`Are you sure you want to delete the survey "${a.name}"?`))try{t(i,!0),await ut(a.id),await de(),t(i,!1)}catch(l){console.error("Error deleting survey:",l),t(i,!1)}},Pe=async a=>{if(confirm("Are you sure you want to delete this question?"))try{t(i,!0),await ft(a),t(M,await he(e(p))),t(i,!1)}catch(l){console.error("Error deleting question:",l),t(i,!1)}},se=()=>{t(b,Math.max(2,Math.min(10,e(b)))),t(u,new Array(e(b)).fill(""))},re=()=>{t($,Array(e(k)).fill().map(()=>({text:"",selectedTopics:new Array(e(u).length).fill(!1)})))},ze=()=>{if(!e(y).trim()){alert("Please enter a survey name");return}if(e(ee).some(a=>a.name===e(y))){alert("A survey with this name already exists");return}F.set(!0)},Ye=async()=>{if(e(u).length>10){alert("Maximum number of topics is 10"),se();return}if(e(u).every(a=>a.trim()!==""))try{t(i,!0);const a={name:e(y),topics:e(u)};t(p,await pt(a)),D.set(!0),t(M,[]),re(),t(i,!1)}catch(a){console.error("Error adding topics:",a),t(i,!1)}else alert("Please enter all topics")},je=async()=>{if(e(Q)&&e($).every(a=>a.text&&a.selectedTopics.some(l=>l)))try{t(i,!0);const a={question:e(Q),buttons:e($).map(l=>({text:l.text,selectedTopics:e(u).filter((P,z)=>l.selectedTopics[z])}))};await _t(e(p),a),t(M,await he(e(p))),t(Q,""),re(),t(S,!1),t(i,!1)}catch(a){console.error("Error adding question:",a),t(i,!1)}else alert("Please fill in all fields and select at least one topic per button")},Ge=()=>{t(b,Math.max(2,Math.min(10,e(b)))),se()},Je=()=>{e(k)<2&&t(k,2),e(k)>10&&t(k,10),re()},pe=()=>{t(ae,!0),t(te,!1),F.set(!1),D.set(!1),ue=null,t(p,null),t(S,!1),de()};rt(()=>ce(),()=>{ce()||se()}),it(),lt();var we=$t(),ke=r(we);{var Ke=a=>{var l=yt();o(a,l)};E(ke,a=>{e(i)&&a(Ke)})}var Ve=s(ke,2);{var Xe=a=>{var l=bt(),P=s(r(l),2),z=s(P,2);{var _e=_=>{var h=qt(),C=s(r(h),2);U(C,1,()=>e(ee),W,(Y,m)=>{var d=mt(),f=r(d),A=r(f),L=s(f,2),g=r(L),x=s(g,2),j=s(x,2);I(()=>R(A,e(m).name)),n("click",g,()=>De(e(m))),n("click",x,()=>Fe(e(m))),n("click",j,()=>navigator.clipboard.writeText(`${window.location.origin}?survey=${e(m).id}`)),o(Y,d)}),o(_,h)};E(z,_=>{e(ee).length>0&&_(_e)})}n("click",P,Oe),o(a,l)},Ze=a=>{var l=Qe(),P=be(l);{var z=_=>{var h=ht(),C=r(h),Y=s(C,2),m=s(r(Y),2),d=s(m,2);n("click",C,pe),O(m,()=>e(y),f=>t(y,f)),n("click",d,ze),o(_,h)},_e=_=>{var h=Qe(),C=be(h);{var Y=d=>{var f=xt(),A=r(f),L=s(A,2),g=s(r(L),2),x=s(g,4);U(x,1,()=>e(u),W,(B,Se,G)=>{var J=gt();Ce(J,"placeholder",`Enter topic ${G+1}`),O(J,()=>e(u)[G],fe=>nt(u,e(u)[G]=fe)),o(B,J)});var j=s(x,2);n("click",A,pe),O(g,()=>e(b),B=>t(b,B)),n("input",g,Ge),n("click",j,Ye),o(d,f)},m=d=>{var f=Qt(),A=r(f),L=s(A,2),g=r(L),x=s(L,2),j=s(r(x),2),B=r(j),Se=s(B,2),G=s(x,2);{var J=H=>{var K=At(),V=r(K),ie=s(V,2);{var ye=q=>{var T=kt(),oe=s(be(T),2);U(oe,1,()=>e(M),W,(me,w)=>{var N=wt(),X=r(N),ne=r(X),ve=s(X,2),Z=r(ve);I(()=>R(ne,e(w).question)),n("click",Z,()=>Pe(e(w).id)),o(me,N)}),o(q,T)},le=q=>{var T=St();o(q,T)};E(ie,q=>{e(M).length>0?q(ye):q(le,!1)})}n("click",V,xe),o(H,K)},fe=H=>{var K=Et(),V=r(K),ie=s(V,2),ye=r(ie),le=s(ie,2),q=s(le,2),T=s(r(q),2),oe=s(q,2);U(oe,5,()=>e($),W,(w,N,X)=>{var ne=Nt(),ve=r(ne);ve.textContent=`Option ${X+1}`;var Z=s(ve,2);Ce(Z,"placeholder",`Option ${X+1} text`);var Ie=s(Z,2),Re=s(r(Ie),2);U(Re,1,()=>e(u),W,(qe,Ue,Ae)=>{var Te=Tt(),Ne=r(Te),We=s(Ne);I(()=>R(We,` ${e(Ue)??""}`)),vt(Ne,()=>e(N).selectedTopics[Ae],et=>(e(N).selectedTopics[Ae]=et,Me(()=>e($)))),o(qe,Te)}),O(Z,()=>e(N).text,qe=>(e(N).text=qe,Me(()=>e($)))),o(w,ne)});var me=s(oe,2);I(()=>R(ye,`Add a New Question to "${e(y)??""}"`)),n("click",V,xe),O(le,()=>e(Q),w=>t(Q,w)),O(T,()=>e(k),w=>t(k,w)),n("input",T,Je),n("click",me,je),o(H,K)};E(G,H=>{e(S)?H(fe,!1):H(J)})}I(()=>{R(g,`Survey: ${e(y)??""}`),dt(B,`${window.location.origin}?survey=${e(p)}`)}),n("click",A,pe),n("click",Se,()=>navigator.clipboard.writeText(`${window.location.origin}?survey=${e(p)}`)),o(d,f)};E(C,d=>{!ce()&&!e(te)?d(Y):d(m,!1)},!0)}o(_,h)};E(P,_=>{He()?_(_e,!1):_(z)},!0)}o(a,l)};E(Ve,a=>{e(ae)?a(Xe):a(Ze,!1)})}o(Le,we),ot()}export{Lt as default};
