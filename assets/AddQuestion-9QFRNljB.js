import{A as rt,a1 as ot,_ as nt,c as t,C as vt,E as dt,F as ct,H as L,d as e,M as o,O as ut,Q as v,a2 as $e,Z as c,I as i,G as a,N as n,V as Me,T as xe,a3 as Ce,Y as z,J as te,K as U,$ as gt,a4 as pt,a5 as Le}from"./index-C4e8H7Gs.js";import{g as _t,e as se,i as ae,s as Oe,d as kt,b as we,f as ft,h as yt,u as mt,j as bt,k as ht}from"./databaseService-CGjgOaeA.js";var xt=v('<div class="loading svelte-3g3k2d">Loading...</div>'),wt=v('<div class="survey-item svelte-3g3k2d"><span class="survey-name svelte-3g3k2d"> </span> <div class="survey-actions svelte-3g3k2d"><button class="svelte-3g3k2d">Edit</button> <button class="delete svelte-3g3k2d">Delete</button> <button class="share svelte-3g3k2d">Copy Link</button></div></div>'),St=v('<div class="existing-surveys svelte-3g3k2d"><h3 class="svelte-3g3k2d">Existing Surveys</h3> <!></div>'),At=v('<div class="survey-management svelte-3g3k2d"><h2 class="svelte-3g3k2d">Survey Management</h2> <button class="create-new svelte-3g3k2d">Create New Survey</button> <!></div>'),Tt=v('<div class="survey-name-form svelte-3g3k2d"><button class="back-button svelte-3g3k2d">← Back to Survey List</button> <div class="survey-section svelte-3g3k2d"><h2 class="svelte-3g3k2d">Enter Survey Name</h2> <input type="text" placeholder="Enter survey name" class="svelte-3g3k2d"> <button class="svelte-3g3k2d">Submit Survey Name</button></div></div>'),Et=v('<input type="text" class="svelte-3g3k2d">'),Qt=v('<div class="topics-form svelte-3g3k2d"><button class="back-button svelte-3g3k2d">← Back to Survey List</button> <div class="topics-section svelte-3g3k2d"><h2 class="svelte-3g3k2d">How many topics would you like to add? (2-10)</h2> <input type="number" min="2" max="10" class="svelte-3g3k2d"> <h3 class="svelte-3g3k2d">Enter Your Topics</h3> <!> <button class="svelte-3g3k2d">Submit Topics</button></div></div>'),Nt=v('<div class="question-item svelte-3g3k2d"><span class="question-text svelte-3g3k2d"> </span> <div class="question-actions svelte-3g3k2d"><button class="svelte-3g3k2d">Edit</button> <button class="delete svelte-3g3k2d">Delete</button></div></div>'),qt=v('<h3 class="svelte-3g3k2d">Questions</h3> <!>',1),$t=v('<p class="no-questions svelte-3g3k2d">No questions added yet.</p>'),Mt=v('<div class="existing-questions svelte-3g3k2d"><button class="create-new svelte-3g3k2d">Add New Question</button> <!></div>'),Ct=v('<label class="svelte-3g3k2d"><input type="checkbox" class="svelte-3g3k2d"> </label>'),Lt=v('<div class="button-options svelte-3g3k2d"><h4 class="svelte-3g3k2d"></h4> <input type="text" class="svelte-3g3k2d"> <div class="topic-checkboxes svelte-3g3k2d"><p class="svelte-3g3k2d">Select associated topics:</p> <!></div></div>'),Ot=v('<div class="add-question-container svelte-3g3k2d"><button class="back-button svelte-3g3k2d">← Back to Questions</button> <h2 class="svelte-3g3k2d"> </h2> <input type="text" placeholder="Enter your question" class="svelte-3g3k2d"> <div class="options-count svelte-3g3k2d"><h3 class="svelte-3g3k2d">Number of options for this question:</h3> <input type="number" min="2" max="10" class="svelte-3g3k2d"></div> <div class="button-container svelte-3g3k2d"></div> <button class="svelte-3g3k2d"> </button></div>'),Bt=v('<div class="question-management svelte-3g3k2d"><button class="back-button svelte-3g3k2d">← Back to Survey List</button> <h2 class="svelte-3g3k2d"> </h2> <div class="survey-link svelte-3g3k2d"><p>Share this link with others:</p> <div class="link-container svelte-3g3k2d"><input type="text" readonly="" class="svelte-3g3k2d"> <button class="svelte-3g3k2d">Copy</button></div></div> <!></div>'),Dt=v('<main class="svelte-3g3k2d"><!> <!></main>');function Pt(Be,De){rt(De,!1);const Se=ot(),pe=()=>$e(Y,"$areTopicsAdded",Se),Fe=()=>$e(j,"$isSurveyNameAdded",Se);let k=c(""),b=c(2),d=c([]),h=c(""),x=c(2),N=c([]),ie=c([]),_e=null,g=c(null),le=c(!1),O=c([]),f=c(!1),r=c(!1),Y=Ce(!1),j=Ce(!1),re=c(!0),ke=null,w=c(null);nt(async()=>{await fe()});const fe=async()=>{try{t(r,!0),t(ie,await _t()),t(r,!1)}catch(s){console.error("Error loading surveys:",s),t(r,!1)}},He=s=>{t(w,s.id),t(h,s.question),t(x,s.buttons.length),t(N,s.buttons.map(l=>{const S=new Array(e(d).length).fill(!1);return l.selectedTopics.forEach(q=>{const B=e(d).indexOf(q);B!==-1&&(S[B]=!0)}),{text:l.text,selectedTopics:S}})),t(f,!0),ke=s},Pe=()=>{t(re,!1),t(le,!1),j.set(!1),Y.set(!1),t(k,""),_e=null,t(g,null),t(b,2),oe()},ze=async s=>{try{t(r,!0),t(g,s.id),_e=s.name,t(k,s.name),t(le,!0),t(re,!1),j.set(!0),Y.set(!0),t(d,s.topics||[]),t(O,await we(e(g))),t(f,!1),t(r,!1)}catch(l){console.error("Error editing survey:",l),t(r,!1)}},Ue=()=>{t(f,!e(f)),e(f)&&(t(h,""),G())},Ye=async s=>{if(confirm(`Are you sure you want to delete the survey "${s.name}"?`))try{t(r,!0),await ft(s.id),await fe(),t(r,!1)}catch(l){console.error("Error deleting survey:",l),t(r,!1)}},je=async s=>{if(confirm("Are you sure you want to delete this question?"))try{t(r,!0),await ht(s),t(O,await we(e(g))),t(r,!1)}catch(l){console.error("Error deleting question:",l),t(r,!1)}},oe=()=>{t(b,Math.max(2,Math.min(10,e(b)))),t(d,new Array(e(b)).fill(""))},G=()=>{t(N,Array(e(x)).fill().map(()=>({text:"",selectedTopics:new Array(e(d).length).fill(!1)})))},Ge=()=>{if(!e(k).trim()){alert("Please enter a survey name");return}if(e(ie).some(s=>s.name===e(k))){alert("A survey with this name already exists");return}j.set(!0)},Ie=async()=>{if(e(d).length>10){alert("Maximum number of topics is 10"),oe();return}if(e(d).every(s=>s.trim()!==""))try{t(r,!0);const s={name:e(k),topics:e(d)};t(g,await yt(s)),Y.set(!0),t(O,[]),G(),t(r,!1)}catch(s){console.error("Error adding topics:",s),t(r,!1)}else alert("Please enter all topics")},Je=async()=>{if(e(h)&&e(N).every(s=>s.text&&s.selectedTopics.some(l=>l)))try{t(r,!0);const s={question:e(h),buttons:e(N).map(l=>({text:l.text,selectedTopics:e(d).filter((S,q)=>l.selectedTopics[q])}))};e(w)?await mt(e(w),s):await bt(e(g),s),t(O,await we(e(g))),t(h,""),t(w,null),ke=null,G(),t(f,!1),t(r,!1)}catch(s){console.error(e(w)?"Error updating question:":"Error adding question:",s),t(r,!1)}else alert("Please fill in all fields and select at least one topic per button")},Ke=()=>{t(h,""),t(w,null),ke=null,G(),t(f,!1)},Ve=()=>{t(b,Math.max(2,Math.min(10,e(b)))),oe()},Ze=()=>{e(x)<2&&t(x,2),e(x)>10&&t(x,10),G()},ye=()=>{t(re,!0),t(le,!1),j.set(!1),Y.set(!1),_e=null,t(g,null),t(f,!1),fe()};vt(()=>pe(),()=>{pe()||oe()}),dt(),ct();var Ae=Dt(),Te=i(Ae);{var Re=s=>{var l=xt();o(s,l)};L(Te,s=>{e(r)&&s(Re)})}var We=a(Te,2);{var Xe=s=>{var l=At(),S=a(i(l),2),q=a(S,2);{var B=p=>{var A=St(),D=a(i(A),2);se(D,1,()=>e(ie),ae,(I,y)=>{var u=wt(),_=i(u),$=i(_),F=a(_,2),T=i(F),E=a(T,2),J=a(E,2);te(()=>U($,e(y).name)),n("click",T,()=>ze(e(y))),n("click",E,()=>Ye(e(y))),n("click",J,()=>navigator.clipboard.writeText(`${window.location.origin}?survey=${e(y).id}`)),o(I,u)}),o(p,A)};L(q,p=>{e(ie).length>0&&p(B)})}n("click",S,Pe),o(s,l)},et=s=>{var l=Me(),S=xe(l);{var q=p=>{var A=Tt(),D=i(A),I=a(D,2),y=a(i(I),2),u=a(y,2);n("click",D,ye),z(y,()=>e(k),_=>t(k,_)),n("click",u,Ge),o(p,A)},B=p=>{var A=Me(),D=xe(A);{var I=u=>{var _=Qt(),$=i(_),F=a($,2),T=a(i(F),2),E=a(T,4);se(E,1,()=>e(d),ae,(H,Ee,K)=>{var V=Et();Oe(V,"placeholder",`Enter topic ${K+1}`),z(V,()=>e(d)[K],me=>gt(d,e(d)[K]=me)),o(H,V)});var J=a(E,2);n("click",$,ye),z(T,()=>e(b),H=>t(b,H)),n("input",T,Ve),n("click",J,Ie),o(u,_)},y=u=>{var _=Bt(),$=i(_),F=a($,2),T=i(F),E=a(F,2),J=a(i(E),2),H=i(J),Ee=a(H,2),K=a(E,2);{var V=P=>{var Z=Mt(),R=i(Z),ne=a(R,2);{var be=m=>{var M=qt(),de=a(xe(M),2);se(de,1,()=>e(O),ae,(ce,W)=>{var Q=Nt(),C=i(Q),ue=i(C),ge=a(C,2),X=i(ge),ee=a(X,2);te(()=>U(ue,e(W).question)),n("click",X,()=>He(e(W))),n("click",ee,()=>je(e(W).id)),o(ce,Q)}),o(m,M)},ve=m=>{var M=$t();o(m,M)};L(ne,m=>{e(O).length>0?m(be):m(ve,!1)})}n("click",R,Ue),o(P,Z)},me=P=>{var Z=Ot(),R=i(Z),ne=a(R,2),be=i(ne),ve=a(ne,2),m=a(ve,2),M=a(i(m),2),de=a(m,2);se(de,5,()=>e(N),ae,(Q,C,ue)=>{var ge=Lt(),X=i(ge);X.textContent=`Option ${ue+1}`;var ee=a(X,2);Oe(ee,"placeholder",`Option ${ue+1} text`);var tt=a(ee,2),st=a(i(tt),2);se(st,1,()=>e(d),ae,(he,at,Qe)=>{var Ne=Ct(),qe=i(Ne),it=a(qe);te(()=>U(it,` ${e(at)??""}`)),pt(qe,()=>e(C).selectedTopics[Qe],lt=>(e(C).selectedTopics[Qe]=lt,Le(()=>e(N)))),o(he,Ne)}),z(ee,()=>e(C).text,he=>(e(C).text=he,Le(()=>e(N)))),o(Q,ge)});var ce=a(de,2),W=i(ce);te(()=>{U(be,`${(e(w)?"Edit":"Add a New")??""} Question for "${e(k)??""}"`),U(W,`${(e(w)?"Update":"Add")??""} Question`)}),n("click",R,Ke),z(ve,()=>e(h),Q=>t(h,Q)),z(M,()=>e(x),Q=>t(x,Q)),n("input",M,Ze),n("click",ce,Je),o(P,Z)};L(K,P=>{e(f)?P(me,!1):P(V)})}te(()=>{U(T,`Survey: ${e(k)??""}`),kt(H,`${window.location.origin}?survey=${e(g)}`)}),n("click",$,ye),n("click",Ee,()=>navigator.clipboard.writeText(`${window.location.origin}?survey=${e(g)}`)),o(u,_)};L(D,u=>{!pe()&&!e(le)?u(I):u(y,!1)},!0)}o(p,A)};L(S,p=>{Fe()?p(B,!1):p(q)},!0)}o(s,l)};L(We,s=>{e(re)?s(Xe):s(et,!1)})}o(Be,Ae),ut()}export{Pt as default};
