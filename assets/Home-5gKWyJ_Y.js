import{S as ve,o as qe,a as Ne,s as ee,b as Ae,c as i,U as Y,g as oe,d as e,e as de,f as Le,h as Te,i as je,j as De,p as Me,L as Ce,P as Fe,k as Ye,u as _e,B as Ue,R as Be,l as ge,m as He,n as Qe,q as ke,r as Ge,t as Ke,v as he,w as ue,x as Ze,y as ze,z as Ve,A as xe,C as Je,D as me,E as We,F as pe,G as Q,H as z,I as re,J as m,K as Se,M as p,N as x,O as c,Q as se,T,V as Re,W as be,X as Xe,Y as Z,Z as $e,_ as et}from"./index-O_JfYVpB.js";import{e as ne,s as tt,i as le,g as at,a as rt,b as st}from"./databaseService-DSdtOv2F.js";function ae(o,b=null,y){if(typeof o!="object"||o===null||ve in o)return o;const j=Te(o);if(j!==qe&&j!==Ne)return o;var d=new Map,S=je(o),E=ee(0);S&&d.set("length",ee(o.length));var P;return new Proxy(o,{defineProperty(v,t,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&Ae();var r=d.get(t);return r===void 0?(r=ee(a.value),d.set(t,r)):i(r,ae(a.value,P)),!0},deleteProperty(v,t){var a=d.get(t);if(a===void 0)t in v&&d.set(t,ee(Y));else{if(S&&typeof t=="string"){var r=d.get("length"),s=Number(t);Number.isInteger(s)&&s<r.v&&i(r,s)}i(a,Y),ye(E)}return!0},get(v,t,a){var q;if(t===ve)return o;var r=d.get(t),s=t in v;if(r===void 0&&(!s||(q=oe(v,t))!=null&&q.writable)&&(r=ee(ae(s?v[t]:Y,P)),d.set(t,r)),r!==void 0){var h=e(r);return h===Y?void 0:h}return Reflect.get(v,t,a)},getOwnPropertyDescriptor(v,t){var a=Reflect.getOwnPropertyDescriptor(v,t);if(a&&"value"in a){var r=d.get(t);r&&(a.value=e(r))}else if(a===void 0){var s=d.get(t),h=s==null?void 0:s.v;if(s!==void 0&&h!==Y)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return a},has(v,t){var h;if(t===ve)return!0;var a=d.get(t),r=a!==void 0&&a.v!==Y||Reflect.has(v,t);if(a!==void 0||de!==null&&(!r||(h=oe(v,t))!=null&&h.writable)){a===void 0&&(a=ee(r?ae(v[t],P):Y),d.set(t,a));var s=e(a);if(s===Y)return!1}return r},set(v,t,a,r){var g;var s=d.get(t),h=t in v;if(S&&t==="length")for(var q=a;q<s.v;q+=1){var U=d.get(q+"");U!==void 0?i(U,Y):q in v&&(U=ee(Y),d.set(q+"",U))}s===void 0?(!h||(g=oe(v,t))!=null&&g.writable)&&(s=ee(void 0),i(s,ae(a,P)),d.set(t,s)):(h=s.v!==Y,i(s,ae(a,P)));var A=Reflect.getOwnPropertyDescriptor(v,t);if(A!=null&&A.set&&A.set.call(r,a),!h){if(S&&typeof t=="string"){var R=d.get("length"),_=Number(t);Number.isInteger(_)&&_>=R.v&&i(R,_+1)}ye(E)}return!0},ownKeys(v){e(E);var t=Reflect.ownKeys(v).filter(s=>{var h=d.get(s);return h===void 0||h.v!==Y});for(var[a,r]of d)r.v!==Y&&!(a in v)&&t.push(a);return t},setPrototypeOf(){Le()}})}function ye(o,b=1){i(o,o.v+b)}function we(o){for(var b=de,y=de;b!==null&&!(b.f&(Ue|Be));)b=b.parent;try{return ge(b),o()}finally{ge(y)}}function ie(o,b,y,j){var W;var d=(y&He)!==0,S=!Qe||(y&ke)!==0,E=(y&Ge)!==0,P=(y&ze)!==0,v=!1,t;E?[t,v]=De(()=>o[b]):t=o[b];var a=ve in o||Ke in o,r=((W=oe(o,b))==null?void 0:W.set)??(a&&E&&b in o?l=>o[b]=l:void 0),s=j,h=!0,q=!1,U=()=>(q=!0,h&&(h=!1,P?s=_e(j):s=j),s);t===void 0&&j!==void 0&&(r&&S&&Me(),t=U(),r&&r(t));var A;if(S)A=()=>{var l=o[b];return l===void 0?U():(h=!0,q=!1,l)};else{var R=we(()=>(d?he:ue)(()=>o[b]));R.f|=Ce,A=()=>{var l=e(R);return l!==void 0&&(s=void 0),l===void 0?s:l}}if(!(y&Fe))return A;if(r){var _=o.$$legacy;return function(l,O){return arguments.length>0?((!S||!O||_||v)&&r(O?A():l),l):A()}}var g=!1,u=!1,L=Ze(t),F=we(()=>he(()=>{var l=A(),O=e(L);return g?(g=!1,u=!0,O):(u=!1,L.v=l)}));return d||(F.equals=Ye),function(l,O){if(Ve!==null&&(g=u,A(),e(L)),arguments.length>0){const B=O?e(F):S&&E?ae(l):l;return F.equals(B)||(g=!0,i(L,B),q&&s!==void 0&&(s=B),_e(()=>e(F))),l}return e(F)}}var nt=p('<p class="svelte-11mi84l">You are most suited for <strong class="svelte-11mi84l"> </strong></p>'),lt=p('<strong class="svelte-11mi84l"> </strong> and <strong class="svelte-11mi84l"> </strong>',1),it=p('<strong class="svelte-11mi84l"> </strong><!><!>',1),vt=p('<p class="svelte-11mi84l">You are equally suited for <!></p>'),ot=p('<h2 class="svelte-11mi84l">Conclusion</h2> <!>',1),ut=p('<li class="svelte-11mi84l"><p class="question-text svelte-11mi84l"> </p> <p class="answer-text svelte-11mi84l"> </p></li>'),ct=p('<ul class="svelte-11mi84l"></ul>'),ft=p('<p class="no-answers svelte-11mi84l">No answers for this topic</p>'),dt=p('<div class="result-card svelte-11mi84l"><h2 class="svelte-11mi84l"> </h2> <div class="percentage-bar svelte-11mi84l"><div class="percentage-fill svelte-11mi84l"></div></div> <p class="percentage-text svelte-11mi84l"> </p> <p class="points-text svelte-11mi84l"> </p> <div class="answers-section svelte-11mi84l"><h3 class="svelte-11mi84l">Supporting Answers:</h3> <!></div></div>'),_t=p('<div class="results-container svelte-11mi84l"><h1 class="svelte-11mi84l"> </h1> <div class="conclusion svelte-11mi84l"><!></div> <div class="results-grid svelte-11mi84l"></div> <div class="action-buttons svelte-11mi84l"><button class="restart-button svelte-11mi84l">Start Over</button> <button class="share-button svelte-11mi84l">Share Results</button></div></div>');function gt(o,b){xe(b,!1);let y=ie(b,"topicResults",28,()=>({})),j=ie(b,"onRestart",8),d=ie(b,"answerHistory",24,()=>[]),S=ie(b,"surveyName",8,"Survey");const E=()=>{const R=Math.max(...Object.values(y()).map(u=>u.count)),_=Object.entries(y()).filter(([u,L])=>L.count===R).map(([u])=>u);let g=`I just completed the "${S()}" survey!

`;_.length===1?g+=`My result: I am most suited for ${_[0]}

`:g+=`My result: I am equally suited for ${_.join(" and ")}

`,g+=`Take the survey yourself: ${window.location.href}`,navigator.share?navigator.share({title:`My ${S()} Results`,text:g,url:window.location.href}).catch(u=>{navigator.clipboard.writeText(g)}):navigator.clipboard.writeText(g)};Je(()=>(me(y()),me(d())),()=>{const R=Object.values(y()).reduce((_,g)=>_+g,0);y(Object.entries(y()).reduce((_,[g,u])=>(_[g]={count:u,percentage:R>0?Math.round(u/R*100):0,answers:d().filter(L=>L.topics.includes(g))},_),{}))}),We(),pe();var P=_t(),v=c(P),t=c(v),a=x(v,2),r=c(a);{var s=R=>{var _=ot();const g=ue(()=>Math.max(...Object.values(y()).map(l=>l.count))),u=ue(()=>Object.entries(y()).filter(([l,O])=>O.count===e(g)).map(([l])=>l));var L=x(se(_),2);{var F=l=>{var O=nt(),B=x(c(O)),n=c(B);z(()=>T(n,e(u)[0])),m(l,O)},W=l=>{var O=vt(),B=x(c(O));{var n=w=>{var M=lt(),H=se(M),N=c(H),C=x(H,2),G=c(C);z(()=>{T(N,e(u)[0]),T(G,e(u)[1])}),m(w,M)},f=w=>{var M=Re(),H=se(M);ne(H,1,()=>e(u),le,(N,C,G)=>{var V=it(),J=se(V),I=c(J),D=x(J);{var K=k=>{var te=be(",");m(k,te)};Q(D,k=>{G<e(u).length-2&&k(K)})}var X=x(D);{var $=k=>{var te=be("and");m(k,te)};Q(X,k=>{G===e(u).length-2&&k($)})}z(()=>T(I,e(C))),m(N,V)}),m(w,M)};Q(B,w=>{e(u).length===2?w(n):w(f,!1)})}m(l,O)};Q(L,l=>{e(u).length===1?l(F):l(W,!1)})}m(R,_)};Q(r,R=>{Object.entries(y()).length>0&&R(s)})}var h=x(a,2);ne(h,5,()=>Object.entries(y()),le,(R,_)=>{let g=()=>e(_)[0],u=()=>e(_)[1];var L=dt(),F=c(L),W=c(F),l=x(F,4),O=c(l),B=x(l,2),n=c(B),f=x(B,2),w=x(c(f),2);{var M=N=>{var C=ct();ne(C,5,()=>u().answers,le,(G,V)=>{var J=ut(),I=c(J),D=c(I),K=x(I,2),X=c(K);z(()=>{T(D,e(V).question),T(X,`You chose: ${e(V).answer??""}`)}),m(G,J)}),m(N,C)},H=N=>{var C=ft();m(N,C)};Q(w,N=>{u().answers.length>0?N(M):N(H,!1)})}z(()=>{tt(L,"style",`--percentage: ${u().percentage??""}%`),T(W,g()),T(O,`${u().percentage??""}%`),T(n,`(${u().count??""} points)`)}),m(R,L)});var q=x(h,2),U=c(q),A=x(U,2);z(()=>T(t,`Your Results for "${S()??""}"`)),re("click",U,function(...R){var _;(_=j())==null||_.apply(this,R)}),re("click",A,E),m(o,P),Se()}var ht=p('<div class="loading svelte-1bar8og">Loading...</div>'),mt=p('<div class="error svelte-1bar8og"><p> </p> <button class="svelte-1bar8og">Dismiss</button></div>'),bt=p('<button class="survey-button svelte-1bar8og"> </button>'),yt=p('<div class="survey-list svelte-1bar8og"></div>'),wt=p("<p>No surveys available. Please add some surveys first.</p>"),xt=p('<div class="survey-selection svelte-1bar8og"><h2 class="svelte-1bar8og">Select a Decision Aid</h2> <!></div>'),pt=p('<button class="svelte-1bar8og"> </button>'),St=p('<div class="question-container svelte-1bar8og"><h3 class="svelte-1bar8og"> </h3> <h2 class="svelte-1bar8og"> </h2> <div class="button-container svelte-1bar8og"></div> <div class="progress svelte-1bar8og"> </div></div>'),Rt=p('<div class="no-questions svelte-1bar8og"><p>No questions available for this survey.</p> <button class="svelte-1bar8og">Select Another Survey</button></div>'),Pt=p('<div class="main-content svelte-1bar8og"><!></div>'),Ot=p('<main class="svelte-1bar8og"><!> <!> <!></main>');function qt(o,b){xe(b,!1);let y=Z([]),j=Z(null),d=null,S=Z([]),E=Z(0),P=Z(),v=Z({}),t=Z(!1),a=Z([]),r=Z(!1),s=Z(null);Xe(async()=>{const f=new URLSearchParams(window.location.search).get("survey");if(f)try{await q(f)}catch{i(s,"Failed to load the requested survey."),await h()}else await h()});const h=async()=>{try{i(r,!0),i(y,await at()),i(r,!1)}catch(n){console.error("Error loading surveys:",n),i(s,"Failed to load surveys. Please try again later."),i(r,!1)}},q=async n=>{try{i(r,!0);const f=await rt(n),w=await st(n);if(!f||!w||w.length===0)throw new Error("Survey not found or has no questions");d=n,i(j,f),i(S,w),i(E,0),i(P,e(S)[e(E)]),i(v,(f.topics||[]).reduce((M,H)=>(M[H]=0,M),{})),i(r,!1)}catch(f){throw console.error("Error loading survey:",f),i(r,!1),f}},U=async n=>{try{await q(n.id);const f=new URL(window.location);f.searchParams.set("survey",n.id),window.history.pushState({},"",f)}catch{i(s,"Failed to load the selected survey.")}},A=(n,f)=>{e(a).push({question:e(P).question,answer:f,topics:n}),n.forEach(w=>{$e(v,e(v)[w]++)}),R()},R=()=>{e(E)<e(S).length-1?(et(E),i(P,e(S)[e(E)])):i(t,!0)},_=()=>{i(j,null),d=null,i(t,!1),i(S,[]),i(E,0),i(P,null),i(a,[]),i(v,{});const n=new URL(window.location);n.searchParams.delete("survey"),window.history.pushState({},"",n)};pe();var g=Ot(),u=c(g);{var L=n=>{var f=ht();m(n,f)};Q(u,n=>{e(r)&&n(L)})}var F=x(u,2);{var W=n=>{var f=mt(),w=c(f),M=c(w),H=x(w,2);z(()=>T(M,e(s))),re("click",H,()=>i(s,null)),m(n,f)};Q(F,n=>{e(s)&&n(W)})}var l=x(F,2);{var O=n=>{var f=ue(()=>{var w;return(w=e(j))==null?void 0:w.name});gt(n,{get topicResults(){return e(v)},onRestart:_,get answerHistory(){return e(a)},get surveyName(){return e(f)}})},B=n=>{var f=Re(),w=se(f);{var M=N=>{var C=xt(),G=x(c(C),2);{var V=I=>{var D=yt();ne(D,5,()=>e(y),le,(K,X)=>{var $=bt(),k=c($);z(()=>T(k,e(X).name)),re("click",$,()=>U(e(X))),m(K,$)}),m(I,D)},J=I=>{var D=wt();m(I,D)};Q(G,I=>{e(y).length>0?I(V):I(J,!1)})}m(N,C)},H=N=>{var C=Pt(),G=c(C);{var V=I=>{var D=St(),K=c(D),X=c(K),$=x(K,2),k=c($),te=x($,2);ne(te,5,()=>e(P).buttons,le,(Ie,ce)=>{var fe=pt(),Ee=c(fe);z(()=>T(Ee,e(ce).text)),re("click",fe,()=>A(e(ce).selectedTopics,e(ce).text)),m(Ie,fe)});var Pe=x(te,2),Oe=c(Pe);z(()=>{T(X,`Survey: ${e(j).name??""}`),T(k,e(P).question),T(Oe,`Question ${e(E)+1} of ${e(S).length??""}`)}),m(I,D)},J=I=>{var D=Rt(),K=x(c(D),2);re("click",K,_),m(I,D)};Q(G,I=>{e(P)?I(V):I(J,!1)})}m(N,C)};Q(w,N=>{e(j)?N(H,!1):N(M)},!0)}m(n,f)};Q(l,n=>{e(t)?n(O):n(B,!1)})}m(o,g),Se()}export{qt as default};
